!function(){"use strict";window.addEventListener("load",(function(){function t(){return 62+i.offsetHeight+5}function e(){c=[],s.forEach((t=>{c.push({id:t.getAttribute("id"),top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight})}))}function o(){const e=t(),o=window.scrollY+e;for(let t=0;t<c.length;t++){const e=c[t];if(o>=e.top&&o<e.bottom)return e.id}if(window.innerHeight+window.scrollY>=document.body.offsetHeight-50)return c[c.length-1].id;let n=null,i=1/0;for(let t=0;t<c.length;t++){const e=c[t],r=Math.abs(o-e.top),s=Math.abs(o-e.bottom),u=Math.min(r,s);u<i&&(i=u,n=e.id)}return n||(c.length>0?c[0].id:"")}function n(t){t&&r.forEach((e=>{e.getAttribute("href").substring(1)===t?e.classList.add("active"):e.classList.remove("active")}))}const i=document.querySelector(".category-nav");if(!i)return;const r=i.querySelectorAll("a"),s=document.querySelectorAll(".book-category");let c=[];e(),r.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const o=this.getAttribute("href").substring(1),n=document.getElementById(o);if(n){r.forEach((t=>t.classList.remove("active"))),this.classList.add("active");const e=t(),o=n.offsetTop-e;window.scrollTo({top:o,behavior:"auto"})}}))}));let u,l=!1;window.addEventListener("scroll",(function(){l||(window.requestAnimationFrame((function(){n(o()),l=!1})),l=!0)})),window.addEventListener("resize",(function(){clearTimeout(u),u=setTimeout((function(){e();n(o())}),250)})),setTimeout(n.bind(null,o()),100)}))}();